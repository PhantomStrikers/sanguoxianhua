name: Daily Sanguosha Task

on:
  schedule:
    # 每天 UTC 时间 0 点运行（对应北京时间 8 点，如需北京时间 0 点请改为 '0 16 * * *'）
    - cron: '0 0 * * *'
  workflow_dispatch:   # 允许手动触发，方便测试

jobs:
  run-script:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'          # 或 '16'、'20'
          cache: 'npm'                 # 利用缓存加速依赖安装

      - name: Install dependencies
        run: npm ci                     # 如果使用 package-lock.json，推荐 npm ci

      - name: Run sanguosha script
        env:
          SGS_TOKENS: ${{ secrets.SGS_TOKENS }}
        run: node sanguosha.js          # 请根据实际脚本文件名调整